{"version":3,"sources":["webpack:///./src/app/views/home/home.module.ts","webpack:///./src/app/views/home/home.routing.ts","webpack:///./src/app/views/home/home.service.ts","webpack:///./src/app/views/home/home/home.component.html","webpack:///./src/app/views/home/home/home.component.ts"],"names":[],"mappings":"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","file":"views-home-home-module.js","sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { NgModule, NO_ERRORS_SCHEMA } from '@angular/core';\r\nimport { ComponentsModule } from 'app/tools/components/components.module';\r\nimport { HomeService } from 'app/views/home/home.service';\r\nimport { HomeRoutingModule } from './home.routing';\r\nimport { HomeComponent } from './home/home.component';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    HomeRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [HomeComponent],\r\n  providers: [HomeService],\r\n  exports: [],\r\n  schemas: [NO_ERRORS_SCHEMA]\r\n})\r\nexport class HomeModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HomeComponent } from 'app/views/home/home/home.component';\r\n\r\nconst routes: Routes = [{\r\n  path: '',\r\n  component: HomeComponent,\r\n  data: { name: 'home', title: 'Hostalar√≠a' }\r\n}];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomeRoutingModule { }\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\nimport { Observable } from 'rxjs';\r\nimport { IOrganization } from 'app/tools/organization.model';\r\n\r\n@Injectable()\r\nexport class HomeService {\r\n  private url = 'home';\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getAllOrganizations(): Observable<IOrganization[]> {\r\n    return this.http\r\n      .get<IOrganization[]>(`${this.url}/organizations`);\r\n  }\r\n\r\n}\r\n","module.exports = \"<ab-dashboard [schemas]=\\\"widgets\\\">\\r\\n</ab-dashboard>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { IWidgetSchema, IAction, ILoadEmptyStateSchema, ITimelineSchema } from 'app/tools/schema.model';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { IOrganization } from 'app/tools/organization.model';\r\nimport { HomeService } from 'app/views/home/home.service';\r\n\r\n@Component({\r\n  selector: 'ab-home',\r\n  templateUrl: './home.component.html',\r\n  styles: []\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  public schemas: IWidgetSchema\r\n  public widgets: IWidgetSchema[] = [];\r\n\r\n  constructor(\r\n    private home: HomeService,\r\n    private schema: SchemaService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.schema\r\n      .getSchema$('home').subscribe(schema => {\r\n        this.schemas = schema;\r\n        this.home\r\n          .getAllOrganizations()\r\n          .subscribe(organizations => this.createWidgets(organizations));\r\n      });\r\n  }\r\n\r\n  createWidgets(organizations: IOrganization[]) {\r\n    this.widgets = [];\r\n    organizations.forEach(organization => {\r\n      const organizationWidget: IWidgetSchema = JSON.parse(JSON.stringify(this.schemas));\r\n      this.pupulateWidget(organizationWidget, organization);\r\n      this.widgets.push(organizationWidget);\r\n    });\r\n  }\r\n\r\n  pupulateWidget(widget, target) {\r\n    // To Do: autopopulate using reflection...)\r\n    widget.header.title = this.schema.valueByPath(target, 'name');\r\n    widget.header.subtitle = this.schema.valueByPath(target, 'slogan');\r\n    widget.actions[0].label = `Ver oferta centro`;\r\n    widget.actions[0].link = `/org/${this.schema.valueByPath(target, 'slug')}`;\r\n    widget.image = `assets/images/${this.schema.valueByPath(target, 'slug')}.jpg`;\r\n    widget.type = 'card';\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}