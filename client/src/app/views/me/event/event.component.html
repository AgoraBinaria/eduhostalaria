<div class="column col-12 card-column"
     *ngIf="event">
  <div class="card">
    <div class="card-header">
      <div class="column col-2 col-sm-12">
        <img [src]="event?.thumbnail.url"
             class="img-responsive">
      </div>
      <div class="column col-10 col-sm-12">
        <div class="card-title h2 text-left">{{ event?.name }}</div>
        <div>
          <button class="btn btn-primary"
                  (click)="this.showThumbnailModal = true;">Subir miniatura</button>
          <button class="btn btn-primary"
                  (click)="this.showFilesModal = true;">Subir arquivos</button>
        </div>
      </div>
    </div>
  </div>
</div>
<ab-panel [schema]="panelSchema">
  <panel-body>
    <ab-form [formSchema]="formSchema"
             (send)="onSend($event)">
    </ab-form>
  </panel-body>
</ab-panel>
<div class="second"
     *ngIf="formKey === 'edit'">
  <ab-panel [schema]="{}">
    <panel-body>
      <ab-tile [schema]="thumbnailSchema"
               (send)="this.showThumbnailModal = true;">
      </ab-tile>
      <ab-tile-compact *ngIf="event && event.thumbnail && event.thumbnail.type"
                       [image]="{url: '#', name: 'thumbnail.' + event.thumbnail.type.split('/')[1], showname: 'thumbnail'}"
                       [link]="false"
                       (clicked)="onDeleteThumbnail()">
      </ab-tile-compact>
    </panel-body>
  </ab-panel>
  <ab-modal title="Miniatura da oferta"
            [active]="showThumbnailModal"
            (close)="this.showThumbnailModal = false;">
    <modal-content>
      <input #thumbnailInput
             type="file"
             accept=".jpg, .jpeg, .png"
             multiple="false">
    </modal-content>
    <modal-footer>
      <ab-action [schema]="fileConfirmButton"
                 (action)="uploadThumbnail(this.event)">
      </ab-action>
    </modal-footer>
  </ab-modal>
</div>
<div class="second"
     *ngIf="formKey === 'edit'">
  <ab-panel [schema]="{}">
    <panel-body>
      <ab-tile [schema]="filesSchema"
               (send)="this.showFilesModal = true;">
      </ab-tile>
      <ng-container *ngIf="formKey === 'edit' && event?.files">
        <ab-tile-compact *ngFor="let file of event.files"
                         [image]="file"
                         (clicked)="onDeleteFile(file)">
        </ab-tile-compact>
      </ng-container>
    </panel-body>
  </ab-panel>
  <ab-modal title="Subir arquivos"
            [active]="showFilesModal"
            (close)="this.showFilesModal = false;">
    <modal-content>
      <input #filesInput
             type="file"
             multiple="true">
    </modal-content>
    <modal-footer>
      <ab-action [schema]="fileConfirmButton"
                 (action)="uploadFiles(this.event)">
      </ab-action>
    </modal-footer>
  </ab-modal>
</div>
